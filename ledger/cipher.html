<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ledger Cipher — Encoder / Decoder</title>
  <style>
    :root
    {
        --bg:#7c2323;
        --card:#7c2323;
        --muted:#666666;
        --accent:#993039;
        color-scheme:dark
    }

    html,body
    {
        height:100%;
        margin:0;
        background: #000000;
        font-family:Inter,
        ui-sans-serif,system-ui,
        -apple-system,'Segoe UI',
        Roboto,'Helvetica Neue',Arial
    }
    

        /*Tab changing styles*/
    .tab-container {
        display: flex;
        border-bottom: 4px solid #641200;
        gap: 10px;
        padding: 0 10px;
    }
    .tab-container:hover {
        border-bottom:4px solid #ffe989;
    }

    .tab {
        padding: 12px 20px;
        border-radius: 8px 8px 0 0;
        color: var(--text);
        text-decoration: none;
    }

    .tab:hover 
    { 
        background: #ffe989; color:#641200; 
    }

    .tab.active 
    { 
        background: #641200; 
        color:#ffe989; 
        border-bottom: 4px solid #641200; 
    }

    .wrap
    {
        max-width:900px;
        margin:48px auto;
        padding:28px;
        background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
        border-radius:12px;
        box-shadow:0 8px 30px rgba(2,6,23,0.6);
        border:1px solid rgba(255,255,255,0.03);
    }

    h1
    {
        margin:0 0 8px;
        color:#fff;
        font-size:20px;
    }

    p.lead
    {
        margin:0 0 24px;
        color:var(--muted);
        font-size:14px;
        line-height:1.5;
    }

    .grid
    {
        display:grid;
        grid-template-columns:1fr 1fr;
        gap:24px;
    }

    textarea
    {
        width:100%;
        height:200px;
        resize:vertical;
        padding:12px;
        border-radius:8px;
        border:1px solid rgba(255,255,255,0.04);
        background:transparent;
        color:#e6eef8;
        font-size:14px;
        font-family:inherit;
        box-sizing:border-box;
    }

    .controls
    {
        display:flex;
        align-items:center;
        gap:12px;
        flex-wrap:wrap;
    }
    
    .btn
    {
        display:inline-flex;
        align-items:center;
        gap:8px;
        padding:8px 12px;
        border-radius:8px;
        border:0;
        background:#7c2323;
        color:white;
        cursor:pointer;
    }

    .btn.ghost
    {
        background:transparent;
        border:1px solid rgba(255,255,255,0.04);
        color:var(--muted);
    }

    .small
    {
        font-size:12px;
        color:var(--muted);
    }
    label.small
    {
        font-size:12px;
        color:var(--muted);
        display:block;
        margin-bottom:6px;
    }

    .row 
    {
        display: flex;
        align-items: center;
        gap: 8px;
        
        background: #1a1a1a; /* visible dark-grey card */
        padding: 8px 12px;
        border-radius: 8px;

        color: #e6eef8; /* readable text color */
    }


    label.switch
    {
        display:flex;
        align-items:center;
        gap:8px;
        color: #993039;
        font-size:13px;
    }

    select 
    {
        background: #0d0d0d; 
        border: 1px solid #993039;
        border-radius: 6px;
        padding: 6px 8px;
        color: #e6eef8;
        font-size: 13px;
        font-family: inherit;
        appearance: none;      
        cursor: pointer;
    }

    input[type=text] 
    {
        background: transparent;
        border: 1px solid #7c2323;
        border-radius: 6px;
        padding: 6px 8px;
        color: #7c2323;
        font-size: 13px;
        font-family: inherit;
    }


    table
    {
        width:20%;
        border-collapse:collapse;
        margin-top:8px;
        color:#000000
    }
    
    th,td
    {
        padding:6px 8px;
        text-align:left;
        border-bottom:1px dashed #993039;
        color: #fff;
        font-size:13px;
    }

    .kbd
    {
        background:rgba(255,255,255,0.03);
        padding:4px 8px;
        border-radius:6px;
        font-size:12px;
        color:#dbeafe;
    }
    
    .mode
    {
        font-weight:bold;
        color:#993039;
    }

    footer
    {
        margin-top:18px;
        color:var(--muted);
        font-size:12px;
    }
  </style>
</head>
<body>

  <!-- Tabs -->
  <div class="tab-container">
      <a href="dashboard.html" class="tab">Dashboard</a>
      <a href="reserve.html" class="tab">Reserve</a>
      <a href="cipher.html" class="tab active">Cipher</a>
  </div>

  <div class="wrap">
    <h1>Ledger Cipher — Encoder / Decoder</h1>
    <p class="lead">Paste or type a message and choose Encode or Decode using your custom substitution cipher (capital letters for names; lowercase letters for numbers). This tool preserves punctuation and spacing.</p>

    <div class="grid">
      <div>
        <label class="small">Input</label>
        <textarea id="input" placeholder="Type or paste text here... e.g. RAMESH 58000 14/12/2025"></textarea>

        <div style="margin-top:10px" class="controls">
          <div class="row">
            <label class="switch">Mode:
              <select id="mode">
                <option value="encode">Encode</option>
                <option value="decode">Decode</option>
              </select>
            </label>
          </div>

          <button class="btn" id="run">Run</button>
          <button class="btn" id="clear">Clear</button>
          <button class="btn" id="copy">Copy Output</button>
        </div>

        <div style="margin-top:12px">
          <span class="small"><span class="kbd">Encode</span> will map real → coded. <span class="kbd">Decode</span> will map coded → real.</span>
        </div>

      </div>

      <div>
        <label class="small">Output (result)</label>
        <textarea id="output" readonly placeholder="Result will appear here..."></textarea>

      </div>
    </div>
    

    <footer>
      Tip: Use <span class="kbd">Ctrl+C</span> to copy selected, or click <span class="kbd">Copy Output</span> to copy entire output. Preserve this page locally by saving it as an HTML file.
    </footer>
    
    <div style="margin-top:10px">
          <details>
            <summary style="color:#7c2323;cursor:pointer">Cipher Reference</summary>
            <table aria-hidden>
              <thead><tr><th>Real</th><th>Coded</th></tr></thead>
              <tbody id="tableBody"></tbody>
            </table>
            <div class="small" style="margin-top:6px">Numbers are encoded to lowercase letters according to the digit map.</div>
          </details>
    </div>

  </div>
  

  <script>
    // Your exact cipher (finalized mapping)
    const letterMap = {
      'A':'M','B':'P','C':'G','D':'Q','E':'V','F':'L','G':'Y','H':'B','I':'Z','J':'T','K':'W','L':'R','M':'X','N':'C','O':'A','P':'K','Q':'S','R':'U','S':'I','T':'O','U':'J','V':'D','W':'F','X':'E','Y':'H','Z':'N'
    };

    const digitMap = {'0':'s','1':'a','2':'g','3':'r','4':'t','5':'k','6':'v','7':'m','8':'x','9':'p'};

    // build reverse maps for decode
    const letterRev = Object.fromEntries(Object.entries(letterMap).map(([k,v])=>[v,k]));
    const digitRev = Object.fromEntries(Object.entries(digitMap).map(([k,v])=>[v,k]));

    // render cipher table
    (function renderTable(){
    const keys = Object.keys(letterMap).sort();
    const tbody = document.getElementById('tableBody');

    // letters
    keys.forEach(k=>{
        const tr = document.createElement('tr');
        const td1 = document.createElement('td'); td1.textContent = k;
        const td2 = document.createElement('td'); td2.textContent = letterMap[k];
        tr.appendChild(td1); tr.appendChild(td2);
        tbody.appendChild(tr);
    });

    // separator
    const sep = document.createElement('tr');
    sep.innerHTML = `<td colspan="2" style="color:#fff;font-weight:bold;text-align:center;padding:6px 0;border-bottom:50% dashed 993039">-DIGITS-</td>`;
    tbody.appendChild(sep);

    // numbers
    Object.keys(digitMap).forEach(k=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${k}</td><td>${digitMap[k]}</td>`;
        tbody.appendChild(tr);
    });

    // symbols identity
    ['%', '/', ','].forEach(s=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${s}</td><td>${s}</td>`;
        tbody.appendChild(tr);
    });
    })();


    function encodeText(text)
    {
      let out='';
      for(let ch of text){
        if(/[A-Z]/.test(ch))
        {
          out += letterMap[ch] ?? ch;
        } else if(/[a-z]/.test(ch))
        {
          // keep lowercase letters as-is (they are not used for names). But allow user to encode lowercase numbers mapping if they typed digits as words
          out += ch;
        } 
        else if(/[0-9]/.test(ch))
        {
            out += digitMap[ch] ?? ch;
        } 
        else 
        {
          out += ch; // punctuation, spaces
        }
      }
      return out;
    }

    function decodeText(text)
    {
      let out='';
      for(let ch of text){
        if(/[A-Z]/.test(ch))
        {
          // if somehow uppercase coded appears, map via reverse
          out += letterRev[ch] ?? ch;
        } 
        else if(/[a-z]/.test(ch))
        {
          // could be coded digit letter or plain lowercase letter
          if(digitRev[ch]) out += digitRev[ch];
          else out += ch;
        } 
        else if(/[0-9]/.test(ch))
        {
          // digits appear — treat as digits
          out += ch;
        } 
        else 
        {
          out += ch;
        }
      }
      return out;
    }

    document.getElementById('run').addEventListener('click', ()=>{
      const mode = document.getElementById('mode').value;
      const input = document.getElementById('input').value;
      let result = '';
      if(mode === 'encode') result = encodeText(input);
      else result = decodeText(input);
      document.getElementById('output').value = result;
    });

    document.getElementById('clear').addEventListener('click', ()=>{document.getElementById('input').value='';document.getElementById('output').value='';});
    document.getElementById('copy').addEventListener('click', ()=>{const out=document.getElementById('output');out.select();document.execCommand('copy');});

    // keyboard shortcut: Ctrl+Enter runs
    document.getElementById('input').addEventListener('keydown', (e)=>{if(e.ctrlKey && e.key==='Enter'){document.getElementById('run').click();}});
  </script>
</body>
</html>
